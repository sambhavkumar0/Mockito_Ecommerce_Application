<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mokito Store - Fashion & Style</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Bootstrap Icons -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet">
    <!-- Custom CSS -->
    <link rel="stylesheet" th:href="@{/styles.css}">
    <style>
        .hero-carousel {
            height: 70vh;
            min-height: 500px;
        }
        .hero-carousel .carousel-item {
            height: 70vh;
            min-height: 500px;
        }
        .hero-carousel .carousel-item img {
            object-fit: cover;
            height: 100%;
            width: 100%;
        }
        .hero-overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(45deg, rgba(0,0,0,0.6), rgba(0,0,0,0.3));
            z-index: 1;
        }
        .hero-content {
            position: relative;
            z-index: 2;
            color: white;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.7);
        }
        .feature-card {
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            border: none;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        .feature-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
        }
        .feature-icon {
            background: linear-gradient(45deg, #007bff, #0056b3);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        .cta-section {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }
        .product-showcase {
            background-color: #f8f9fa;
        }
    </style>
</head>
<body class="d-flex flex-column min-vh-100">

<!-- Include Navbar Fragment -->
<div th:replace="~{fragments/navbar :: navbar}"></div>

<main class="flex-grow-1">
<!-- Hero Carousel Section -->
<section class="hero-carousel">
    <div id="heroCarousel" class="carousel slide" data-bs-ride="carousel" data-bs-interval="5000">
        <div class="carousel-indicators">
            <button type="button" data-bs-target="#heroCarousel" data-bs-slide-to="0" class="active"></button>
            <button type="button" data-bs-target="#heroCarousel" data-bs-slide-to="1"></button>
            <button type="button" data-bs-target="#heroCarousel" data-bs-slide-to="2"></button>
        </div>
        <div class="carousel-inner">
            <!-- Slide 1 -->
            <div class="carousel-item active">
                <img src="https://images.unsplash.com/photo-1441986300917-64674bd600d8?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=2070&q=80" 
                     class="d-block w-100" alt="Fashion Store">
                <div class="hero-overlay"></div>
                <div class="carousel-caption d-flex align-items-center justify-content-center h-100">
                    <div class="hero-content text-center">
                        <h1 class="display-3 fw-bold mb-4">Welcome to Mokito Store</h1>
                        <p class="lead fs-4 mb-4">Discover the latest fashion trends and style yourself with confidence</p>
                        <a class="btn btn-light btn-lg px-4 py-3" th:href="@{/products}">
                            <i class="bi bi-bag me-2"></i>Shop Now
                        </a>
                    </div>
                </div>
            </div>
            <!-- Slide 2 -->
            <div class="carousel-item">
                <img src="https://images.unsplash.com/photo-1472851294608-062f824d29cc?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=2070&q=80" 
                     class="d-block w-100" alt="Summer Collection">
                <div class="hero-overlay"></div>
                <div class="carousel-caption d-flex align-items-center justify-content-center h-100">
                    <div class="hero-content text-center">
                        <h1 class="display-3 fw-bold mb-4">Summer Collection 2025</h1>
                        <p class="lead fs-4 mb-4">Fresh styles for the warm season ahead</p>
                        <a class="btn btn-warning btn-lg px-4 py-3" th:href="@{/products}">
                            <i class="bi bi-sun me-2"></i>Explore Collection
                        </a>
                    </div>
                </div>
            </div>
            <!-- Slide 3 -->
            <div class="carousel-item">
                <img src="https://images.unsplash.com/photo-1445205170230-053b83016050?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=2070&q=80" 
                     class="d-block w-100" alt="Premium Quality">
                <div class="hero-overlay"></div>
                <div class="carousel-caption d-flex align-items-center justify-content-center h-100">
                    <div class="hero-content text-center">
                        <h1 class="display-3 fw-bold mb-4">Premium Quality</h1>
                        <p class="lead fs-4 mb-4">Crafted with care, designed for you</p>
                        <a class="btn btn-success btn-lg px-4 py-3" th:href="@{/products}">
                            <i class="bi bi-star me-2"></i>Shop Premium
                        </a>
                    </div>
                </div>
            </div>
        </div>
        <button class="carousel-control-prev" type="button" data-bs-target="#heroCarousel" data-bs-slide="prev">
            <span class="carousel-control-prev-icon"></span>
        </button>
        <button class="carousel-control-next" type="button" data-bs-target="#heroCarousel" data-bs-slide="next">
            <span class="carousel-control-next-icon"></span>
        </button>
    </div>
</section>

<!-- Features / Highlights -->
<section class="py-5">
    <div class="container">
        <div class="row text-center mb-5">
            <div class="col-12">
                <h2 class="display-5 fw-bold mb-3">Why Choose Mokito Store?</h2>
                <p class="lead text-muted">Experience the best in fashion with our premium services</p>
            </div>
        </div>
        <div class="row text-center">
            <div class="col-md-4 mb-4">
                <div class="card feature-card h-100 p-4">
                    <div class="card-body">
                        <i class="bi bi-truck feature-icon display-4 mb-3"></i>
                        <h3 class="card-title">Fast Delivery</h3>
                        <p class="card-text">Get your order delivered quickly to your doorstep with our express shipping options.</p>
                    </div>
                </div>
            </div>
            <div class="col-md-4 mb-4">
                <div class="card feature-card h-100 p-4">
                    <div class="card-body">
                        <i class="bi bi-arrow-repeat feature-icon display-4 mb-3"></i>
                        <h3 class="card-title">Easy Returns</h3>
                        <p class="card-text">Hassle-free returns on all orders within 30 days. Your satisfaction is our priority.</p>
                    </div>
                </div>
            </div>
            <div class="col-md-4 mb-4">
                <div class="card feature-card h-100 p-4">
                    <div class="card-body">
                        <i class="bi bi-shield-check feature-icon display-4 mb-3"></i>
                        <h3 class="card-title">Secure Payment</h3>
                        <p class="card-text">Safe and secure payment options for your convenience and peace of mind.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Product Showcase Section -->
<section class="product-showcase py-5">
    <div class="container">
        <div class="row text-center mb-5">
            <div class="col-12">
                <h2 class="display-5 fw-bold mb-3">Featured Products</h2>
                <p class="lead text-muted">Discover our handpicked selection of trending items</p>
            </div>
        </div>
        <div class="row">
            <div class="col-md-3 mb-4">
                <div class="card h-100 shadow-sm">
                    <img src="https://images.unsplash.com/photo-1523275335684-37898b6baf30?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80" 
                         class="card-img-top" alt="Premium Watch" style="height: 250px; object-fit: cover;">
                    <div class="card-body d-flex flex-column">
                        <h5 class="card-title">Premium Watch</h5>
                        <p class="card-text text-muted">Elegant timepiece for the modern professional</p>
                        <div class="mt-auto">
                            <span class="h5 text-primary">â‚¹1299.99</span>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-3 mb-4">
                <div class="card h-100 shadow-sm">
                    <img src="https://images.unsplash.com/photo-1542291026-7eec264c27ff?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80" 
                         class="card-img-top" alt="Running Shoes" style="height: 250px; object-fit: cover;">
                    <div class="card-body d-flex flex-column">
                        <h5 class="card-title">Running Shoes</h5>
                        <p class="card-text text-muted">Comfortable and stylish athletic footwear</p>
                        <div class="mt-auto">
                            <span class="h5 text-primary">â‚¹1699.99</span>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-3 mb-4">
                <div class="card h-100 shadow-sm">
                    <img src="https://images.unsplash.com/photo-1505740420928-5e560c06d30e?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80" 
                         class="card-img-top" alt="Wireless Headphones" style="height: 250px; object-fit: cover;">
                    <div class="card-body d-flex flex-column">
                        <h5 class="card-title">Wireless Headphones</h5>
                        <p class="card-text text-muted">Premium sound quality with noise cancellation</p>
                        <div class="mt-auto">
                            <span class="h5 text-primary">â‚¹799.99</span>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-3 mb-4">
                <div class="card h-100 shadow-sm">
                    <img src="https://images.unsplash.com/photo-1553062407-98eeb64c6a62?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80" 
                         class="card-img-top" alt="Designer Bag" style="height: 250px; object-fit: cover;">
                    <div class="card-body d-flex flex-column">
                        <h5 class="card-title">Designer Bag</h5>
                        <p class="card-text text-muted">Luxurious handbag for every occasion</p>
                        <div class="mt-auto">
                            <span class="h5 text-primary">â‚¹2399.99</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="text-center mt-4">
            <a class="btn btn-primary btn-lg" th:href="@{/products}">
                <i class="bi bi-grid me-2"></i>View All Products
            </a>
        </div>
    </div>
</section>

<!-- Call to Action Section -->
<section class="cta-section py-5">
    <div class="container text-center">
        <div class="row justify-content-center">
            <div class="col-lg-8">
                <h2 class="display-5 fw-bold mb-4">Ready to Start Shopping?</h2>
                <p class="lead mb-4">Join thousands of satisfied customers and discover your perfect style today!</p>
                <div class="d-flex justify-content-center gap-3 flex-wrap">
                    <a class="btn btn-light btn-lg px-4 py-3" th:href="@{/products}">
                        <i class="bi bi-bag me-2"></i>Shop Now
                    </a>
                    <a class="btn btn-outline-light btn-lg px-4 py-3" th:href="@{/register}">
                        <i class="bi bi-person-plus me-2"></i>Create Account
                    </a>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Bootstrap JS Bundle -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

<!-- Global logout function -->
<script>
// Function to clear all authentication data (available globally)
function clearAuthData() {
    // Clear all authentication data from localStorage
    localStorage.removeItem("jwtToken");
    localStorage.removeItem("username");
    
    // Also clear sessionStorage if any
    sessionStorage.removeItem("tokenProcessed");
    sessionStorage.clear(); // Clear all session storage
    
    console.log("Authentication data cleared from localStorage and sessionStorage");
}

// Make function available globally
window.clearAuthData = clearAuthData;

// Check authentication state on page load
document.addEventListener('DOMContentLoaded', function() {
    // If user appears to be authenticated but has no JWT token, clear any stale data
    const token = localStorage.getItem('jwtToken');
    const username = localStorage.getItem('username');
    
    // If we have username but no token, clear the username
    if (username && !token) {
        localStorage.removeItem('username');
        console.log('Cleared stale username data (no token found)');
    }
});
</script>
</main>

<!-- Include Footer Fragment -->
<div th:replace="~{fragments/footer :: footer}"></div>

</body>
</html>
